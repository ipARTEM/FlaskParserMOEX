<div align="center">

# üìä FlaskParserMOEX

### –í–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏ (MOEX)

<img src="docs/2.png" alt="Heatmap Screenshot" width="650"/>

[![Python](https://img.shields.io/badge/Python-3.11%2B-blue.svg?logo=python&logoColor=white)]()
[![Flask](https://img.shields.io/badge/Flask-3.0-000000.svg?logo=flask)]()
[![SQLAlchemy](https://img.shields.io/badge/SQLAlchemy-2.0-ff5533.svg?logo=databricks&logoColor=white)]()
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![MOEX](https://img.shields.io/badge/Data-MOEX-orange.svg?logo=chart-bar)]()
[![Build](https://img.shields.io/badge/build-passing-success.svg?logo=githubactions&logoColor=white)]()

</div>

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–∏—Å –Ω–∞ **Flask**, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–ø–ª–æ–∫–∞—Ä—Ç—ã –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏ (MOEX) –ø–æ –∞–∫—Ü–∏—è–º (TQBR) –∏ —Ñ—å—é—á–µ—Ä—Å–∞–º (RFUD).  
–ü—Ä–æ–µ–∫—Ç –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω [parserMOEX](https://github.com/ipARTEM/parserMOEX), –Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω:  
‚Äî –¥–æ–±–∞–≤–ª–µ–Ω **Flask**, **Blueprints**, **–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ API.  
‚Äî –ø–ª–∏—Ç–∫–∏ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º: –æ—Ç üü• –∫—Ä–∞—Å–Ω–æ–≥–æ (—Å–∏–ª—å–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ) –¥–æ üü© –∑–µ–ª—ë–Ω–æ–≥–æ (—Å–∏–ª—å–Ω—ã–π —Ä–æ—Å—Ç).  

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----------|
| üè† **–ì–ª–∞–≤–Ω–∞—è** | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–∞ |
| üìà **–¢–µ–ø–ª–æ–∫–∞—Ä—Ç—ã** | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ü–∏–π (TQBR) –∏ —Ñ—å—é—á–µ—Ä—Å–æ–≤ (RFUD) —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Ü–≤–µ—Ç–∞–º–∏ |
| üîç **–ü–æ–∏—Å–∫** | –ü–æ–∏—Å–∫ –ø–æ —Ç–∏–∫–µ—Ä—É –∏ –Ω–∞–∑–≤–∞–Ω–∏—é –±—É–º–∞–≥–∏ |
| üíæ **–°–Ω–∏–º–∫–∏ –ë–î** | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ SQLite |
| üß© **REST-API** | JSON-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö |
| üé® **–ì—Ä–∞–¥–∏–µ–Ω—Ç –ø–ª–∏—Ç–æ–∫** | –¶–≤–µ—Ç –æ—Ç üü• (–ø–∞–¥–µ–Ω–∏–µ) –¥–æ üü© (—Ä–æ—Å—Ç) –æ—Ç—Ä–∞–∂–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã |

---

> [!TIP]
> –ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç **—á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Flask** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Blueprint-–æ–≤**,  
> –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ (MVC), ORM-–º–æ–¥–µ–ª–µ–π –∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è (`repository` –∏ `services`).

---

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (ORM SQLAlchemy)

| –ú–æ–¥–µ–ª—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–≤—è–∑–∏ |
|--------|-------------|--------|
| **Engine** | –î–≤–∏–∂–æ–∫ —Ç–æ—Ä–≥–æ–≤ (`stock`, `futures`) | 1 ‚Üí N Market |
| **Market** | –†—ã–Ω–æ–∫ (`shares`, `forts`) | 1 ‚Üí N Board |
| **Board** | –ë–∏—Ä–∂–µ–≤–∞—è –¥–æ—Å–∫–∞ (`TQBR`, `RFUD`) | 1 ‚Üí N Snapshot |
| **Security** | –ë—É–º–∞–≥–∞ (`GAZP`, `SBER`, `LKOH`) | 1 ‚Üí N SnapshotItem |
| **Snapshot** | –°–Ω–∏–º–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–æ—Å–∫–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–∏ | 1 ‚Üí N SnapshotItem |
| **SnapshotItem** | –û—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–Ω–∏–º–∫–∞ | ‚Äî |

–í—Å–µ —Å–≤—è–∑–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ `relationship()`,  
–∞ —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—ä–µ–∫—Ç–Ω–∞—è, –±–µ–∑ —Ä—É—á–Ω—ã—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤.

---

## üñºÔ∏è –°–∫—Ä–∏–Ω—à–æ—Ç

![heatmap demo](docs/1.2.png)
![heatmap demo](docs/2.2.png)
![heatmap demo](docs/3.2.png)
![heatmap demo](docs/4.png)
![heatmap demo](docs/5.png)

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ (Windows)
```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
git clone https://github.com/ipARTEM/FlaskParserMOEX.git
cd FlaskParserMOEX

# 2. –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv
.\.venv\Scripts\activate

# 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# 4. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
python -m scripts.create_db

# 5. –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å MOEX
python -m scripts.seed_from_moex

# 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–±–æ—Ä–∫–∏
python -m scripts.show_latest

# 7. –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
$env:FLASK_ADMIN_TOKEN="set-your-strong-admin-token"
python run.py

--- 
REST-API

# –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–ø–ª–æ–∫–∞—Ä—Ç—ã –∞–∫—Ü–∏–π –∏ —Ñ—å—é—á–µ—Ä—Å–æ–≤
GET /market/api/heatmap

# –ü–æ–∏—Å–∫ –ø–æ —Ç–∏–∫–µ—Ä—É –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é
GET /market/api/search?q=SBER

# –ü–æ–ª—É—á–∏—Ç—å —Å–Ω–∏–º–æ–∫ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
GET /market/api/snapshot?board=TQBR&at=2025-10-06

–û—Ç–≤–µ—Ç:

{
  "TQBR": [
    {"secid": "SBER", "name": "–°–±–µ—Ä–±–∞–Ω–∫", "last": 276.4, "change": 0.8, "valtoday": 123456789},
    {"secid": "GAZP", "name": "–ì–∞–∑–ø—Ä–æ–º", "last": 156.2, "change": -0.3, "valtoday": 987654321}
  ]
}


üë®‚Äçüíª –ê–≤—Ç–æ—Ä  Artem Khimin

üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT License.
¬© 2025 Artem Khimin